<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fail Muat Turun O2024</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background: radial-gradient(circle at 20% 20%, #0f2027, #203a43, #2c5364);
      color: #e6e6e6;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Poppins", sans-serif;
    }

    .container-box {
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid #00ffcc33;
      box-shadow: 0 0 30px #00ffaa22;
      border-radius: 15px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      backdrop-filter: blur(5px);
    }

    h1, h2 {
      color: #00ffcc;
    }

    .form-control {
      background: #0e1a1f;
      color: #00ffc3;
      border: 1px solid #00ffc355;
    }

    .form-control:focus {
      border-color: #00ffc3;
      box-shadow: 0 0 10px #00ffc322;
    }

    .btn-success {
      background-color: #00bfa6;
      border: none;
    }

    .btn-success:hover {
      background-color: #00e6b8;
      box-shadow: 0 0 10px #00e6b833;
    }

    .hidden {
      display: none !important;
    }

    a.list-group-item {
      background: #0e1a1f;
      color: #e6e6e6;
      border-color: #00ffc344;
      transition: 0.2s;
    }

    a.list-group-item:hover {
      background: #00ffc322;
      color: #00ffc3;
    }

    .timer {
      color: #ff4d4d;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div class="container-box text-center">
    
    <!-- Password Prompt -->
    <div id="password-section">
      <h2 class="fw-bold mb-3">ðŸ”’ Akses Terhad</h2>
      <p class="text-muted">Masukkan kata laluan untuk mengakses fail.</p>
      <div class="d-flex justify-content-center mt-4">
        <input type="password" id="password-input" class="form-control w-75" placeholder="Masukkan kata laluan">
      </div>
      <button class="btn btn-success mt-3" onclick="checkPassword()">Masuk</button>
      <p id="error-msg" class="text-danger mt-3"></p>
      <p id="lock-msg" class="text-warning mt-3"></p>
      <div id="countdown" class="timer"></div>
    </div>

    <!-- Download Section -->
    <div id="download-section" class="hidden text-center">
      <h1 class="fw-bold text-success mb-4">ðŸ“‚ Muat Turun Fail O2024</h1>
      <p class="text-muted mb-4">Klik fail di bawah untuk muat turun terus.</p>

      <div class="list-group shadow-sm text-start mx-auto" style="max-width:600px;">
        <a href="o2024/configuration.xml" download class="list-group-item list-group-item-action">
          <i class="bi bi-filetype-xml text-info"></i> configuration.xml
        </a>
        <a href="o2024/activation-code-run-in-powershell.txt" download class="list-group-item list-group-item-action">
          <i class="bi bi-terminal text-light"></i> activation-code-run-in-powershell.txt
        </a>
        <a href="o2024/run-configuration-using-this-code-first.txt" download class="list-group-item list-group-item-action">
          <i class="bi bi-code-slash text-warning"></i> run-configuration-using-this-code-first.txt
        </a>
        <a href="o2024/setup.exe" download class="list-group-item list-group-item-action">
          <i class="bi bi-gear-fill text-danger"></i> setup.exe
        </a>
      </div>

      <button class="btn btn-outline-danger mt-4" onclick="logout()">Log Keluar</button>
    </div>
  </div>

  <!-- MD5 Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>

  <script>
    // HASH CONFIG
    const CORRECT_HASH = "2f1cc65fcd7ac85e14459c45d4d9d18a"; // 
    const MAX_ATTEMPTS = 3;
    const LOCK_BASE_MINUTES = 1;
    const LOCK_MAX_MINUTES = 60 * 24;

    function getLockData() {
      return JSON.parse(localStorage.getItem("lockData") || "{}");
    }

    function setLockData(data) {
      localStorage.setItem("lockData", JSON.stringify(data));
    }

    function playBeep() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = "square";
        osc.frequency.value = 400;
        gain.gain.value = 0.1;
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        setTimeout(() => {
          osc.stop();
          ctx.close();
        }, 150);
      } catch (e) {
        console.warn("AudioContext tidak disokong.");
      }
    }

    function startCountdown(until) {
      const countdown = document.getElementById("countdown");
      const interval = setInterval(() => {
        const now = Date.now();
        if (now >= until) {
          countdown.textContent = "";
          clearInterval(interval);
          localStorage.removeItem("lockData");
          document.getElementById("lock-msg").textContent = "âœ… Akses telah dibuka semula. Cuba lagi sekarang.";
          return;
        }
        const diff = Math.ceil((until - now) / 1000);
        const mins = Math.floor(diff / 60);
        const secs = diff % 60;
        countdown.textContent = `âŒ› Cuba lagi dalam ${mins}m ${secs}s`;
      }, 1000);
    }

    function checkPassword() {
      const input = document.getElementById("password-input").value;
      const hash = md5(input.trim());
      const errorMsg = document.getElementById("error-msg");
      const lockMsg = document.getElementById("lock-msg");
      const countdown = document.getElementById("countdown");
      let data = getLockData();
      const now = Date.now();

      if (data.lockUntil && now < data.lockUntil) {
        const unlockTime = new Date(data.lockUntil).toLocaleString();
        lockMsg.textContent = `ðŸš« Akaun dikunci. Cuba semula pada ${unlockTime}.`;
        startCountdown(data.lockUntil);
        return;
      }

      if (hash === CORRECT_HASH) {
        document.getElementById("password-section").classList.add("hidden");
        document.getElementById("download-section").classList.remove("hidden");
        sessionStorage.setItem("auth", "true");
        localStorage.removeItem("lockData");
      } else {
        playBeep();
        data.attempts = (data.attempts || 0) + 1;
        if (data.attempts >= MAX_ATTEMPTS) {
          const duration = Math.min(LOCK_BASE_MINUTES * Math.pow(2, data.attempts - MAX_ATTEMPTS), LOCK_MAX_MINUTES);
          data.lockUntil = now + duration * 60000;
          errorMsg.textContent = "";
          lockMsg.textContent = `âŒ Terlalu banyak percubaan. Akaun dikunci selama ${duration} minit.`;
          startCountdown(data.lockUntil);
        } else {
          errorMsg.textContent = `âŒ Kata laluan salah. Percubaan ${data.attempts}/${MAX_ATTEMPTS}.`;
        }
        setLockData(data);
      }
    }

    function logout() {
      sessionStorage.removeItem("auth");
      location.reload();
    }

    document.getElementById("password-input").addEventListener("keydown", e => {
      if (e.key === "Enter") checkPassword();
    });

    window.onload = () => {
      if (sessionStorage.getItem("auth") === "true") {
        document.getElementById("password-section").classList.add("hidden");
        document.getElementById("download-section").classList.remove("hidden");
      }
    };
  </script>
</body>
</html>

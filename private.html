<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fail Muat Turun O2024 ‚Äî Protected</title>

  <!-- Favicon -->
  <link rel="icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle--150x150.png" sizes="32x32">
  <link rel="icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle-.png" sizes="192x192">
  <link rel="apple-touch-icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle-.png">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    /* === MATRIX BACKGROUND === */
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      color: #0f0;
      font-family: "Roboto Mono", monospace;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .content {
      position: relative;
      z-index: 2;
      color: #e6ffe9;
      min-height: 100vh;
      padding-top: 60px;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }

    .hidden { display: none !important; }
    .panel {
      background: rgba(0,255,136,0.08);
      border: 1px solid rgba(0,255,136,0.2);
      border-radius: 12px;
      padding: 2rem;
    }

    .pw-input {
      background: transparent;
      color: #dfffe9;
      border: 1px dashed rgba(0,255,136,0.3);
    }

    .error-glow {
      animation: glowRed 0.3s ease;
    }
    @keyframes glowRed {
      0% { box-shadow: 0 0 10px rgba(255,0,0,0.7); }
      100% { box-shadow: none; }
    }

    .status-badge {
      background: rgba(0,255,136,0.08);
      border: 1px solid rgba(0,255,136,0.3);
      color: #00ff88;
      border-radius: 8px;
      padding: 4px 10px;
    }

    a { color: #aaffcc; text-decoration: none; }
    a:hover { color: #00ff88; }
  </style>
</head>

<body>
  <canvas id="matrix"></canvas>

  <div class="content">
    <div class="container">
      <div class="col-lg-8 mx-auto">
        <div class="panel">
          <h3 class="fw-bold text-success">üîí Fail Muat Turun O2024</h3>
          <div class="mb-3"><span class="status-badge" id="status-badge">Status: Locked</span></div>

          <!-- PASSWORD SECTION -->
          <div id="password-section">
            <p class="text-muted">Masukkan kata laluan untuk akses:</p>
            <input type="password" id="password-input" class="form-control pw-input" placeholder="Kata laluan (contoh: kienon2024)">
            <button class="btn btn-success mt-3" id="submit-btn">Masuk</button>
            <div id="error-msg" class="text-danger mt-2"></div>
            <div id="lock-msg" class="text-warning mt-2"></div>
          </div>

          <!-- DOWNLOAD SECTION -->
          <div id="download-section" class="hidden">
            <h5 class="text-white mt-4">üìÇ Senarai Fail</h5>
            <ul class="list-group mt-2">
              <li class="list-group-item bg-transparent border-secondary">
                <a href="o2024/configuration.xml" download><i class="bi bi-file-earmark-code"></i> configuration.xml</a>
              </li>
              <li class="list-group-item bg-transparent border-secondary">
                <a href="o2024/activation-code-run-in-powershell.txt" download><i class="bi bi-terminal"></i> activation powershell</a>
              </li>
              <li class="list-group-item bg-transparent border-secondary">
                <a href="o2024/run-configuration-using-this-code-first.txt" download><i class="bi bi-file-earmark-text"></i> run config first</a>
              </li>
              <li class="list-group-item bg-transparent border-secondary">
                <a href="o2024/setup.exe" download><i class="bi bi-box-seam"></i> setup.exe</a>
              </li>
            </ul>

            <button class="btn btn-outline-danger mt-4" id="logout-btn">Log Keluar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MD5 LIBRARY -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>

  <script>
    // === MATRIX ANIMATION ===
    const canvas = document.getElementById("matrix");
    const ctx = canvas.getContext("2d");

    canvas.height = window.innerHeight;
    canvas.width = window.innerWidth;

    const chars = "„Ç¢„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É©„ÉØ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const fontSize = 14;
    const columns = canvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#0F0";
      ctx.font = fontSize + "px monospace";

      for (let i = 0; i < drops.length; i++) {
        const text = chars.charAt(Math.floor(Math.random() * chars.length));
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
      }
    }
    setInterval(drawMatrix, 35);

    window.addEventListener("resize", () => {
      canvas.height = window.innerHeight;
      canvas.width = window.innerWidth;
    });

    // === PASSWORD SYSTEM ===
    const CORRECT_MD5 = "71675337ca0d558c15f36c1c3d85e31d"; // kienon2024
    const MAX_ATTEMPTS = 3;
    const LOCK_BASE_MINUTES = 1;
    const LOCK_MAX_MINUTES = 1440;

    const input = document.getElementById("password-input");
    const submitBtn = document.getElementById("submit-btn");
    const errorMsg = document.getElementById("error-msg");
    const lockMsg = document.getElementById("lock-msg");
    const statusBadge = document.getElementById("status-badge");

    const passwordSection = document.getElementById("password-section");
    const downloadSection = document.getElementById("download-section");
    const logoutBtn = document.getElementById("logout-btn");

    function beep() {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = "square"; osc.frequency.value = 400;
      osc.connect(gain); gain.connect(ctx.destination);
      gain.gain.value = 0.1;
      osc.start();
      setTimeout(() => osc.stop(), 200);
    }

    function now() { return Date.now(); }
    function getState() {
      try { return JSON.parse(localStorage.getItem("lockData")) || { attempts: 0, lockedUntil: 0 }; }
      catch { return { attempts: 0, lockedUntil: 0 }; }
    }
    function saveState(s) { localStorage.setItem("lockData", JSON.stringify(s)); }

    function updateUI() {
      const s = getState();
      const locked = s.lockedUntil && s.lockedUntil > now();
      const authed = sessionStorage.getItem("auth") === "true";

      if (locked) {
        const minsLeft = Math.ceil((s.lockedUntil - now()) / 60000);
        lockMsg.textContent = `üö´ Akaun dikunci. Cuba semula pada ${new Date(s.lockedUntil).toLocaleString()} (${minsLeft} minit lagi).`;
        input.disabled = true;
        submitBtn.disabled = true;
        statusBadge.textContent = "Status: Locked";
      } else {
        lockMsg.textContent = "";
        input.disabled = false;
        submitBtn.disabled = false;
      }

      if (authed) {
        passwordSection.classList.add("hidden");
        downloadSection.classList.remove("hidden");
        statusBadge.textContent = "Status: Unlocked";
      } else {
        passwordSection.classList.remove("hidden");
        downloadSection.classList.add("hidden");
      }
    }

    function checkPassword() {
      const val = input.value.trim();
      if (!val) return;

      const hash = md5(val);
      const s = getState();

      if (s.lockedUntil && s.lockedUntil > now()) {
        updateUI();
        return;
      }

      if (hash === CORRECT_MD5) {
        sessionStorage.setItem("auth", "true");
        s.attempts = 0; s.lockedUntil = 0;
        saveState(s);
        updateUI();
      } else {
        beep();
        input.classList.add("error-glow");
        setTimeout(() => input.classList.remove("error-glow"), 300);
        s.attempts++;
        if (s.attempts >= MAX_ATTEMPTS) {
          const mins = Math.min(LOCK_BASE_MINUTES * Math.pow(2, s.attempts - MAX_ATTEMPTS), LOCK_MAX_MINUTES);
          s.lockedUntil = now() + mins * 60000;
          s.attempts = 0;
          lockMsg.textContent = `‚ùå Terlalu banyak percubaan. Dikunci selama ${mins} minit.`;
        } else {
          errorMsg.textContent = `‚ùå Salah. Percubaan ${s.attempts}/${MAX_ATTEMPTS}`;
        }
        saveState(s);
        updateUI();
      }
    }

    submitBtn.addEventListener("click", checkPassword);
    input.addEventListener("keydown", e => { if (e.key === "Enter") checkPassword(); });
    logoutBtn.addEventListener("click", () => { sessionStorage.removeItem("auth"); updateUI(); });
    window.onload = updateUI;
  </script>
</body>
</html>

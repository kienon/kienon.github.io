<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fail Muat Turun O2024 — Protected</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Favicons (from your main site) -->
  <link rel="icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle--150x150.png" sizes="32x32">
  <link rel="icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle-.png" sizes="192x192">
  <link rel="apple-touch-icon" href="https://kienon.github.io/wp-content/uploads/2025/02/cropped-kienon-circle-.png">

  <style>
    /* --- Hacking vibe + readable panel --- */
    :root{
      --bg:#050607;
      --panel:#0f1415;
      --accent:#00d07a;
      --muted:#9aa5a1;
      --glass: rgba(255,255,255,0.03);
    }
    html,body{height:100%}
    body{
      background:
        radial-gradient(1200px 400px at 10% 10%, rgba(0,208,122,0.035), transparent 5%),
        linear-gradient(180deg,#030304 0%, #081012 100%);
      color:#e6f7ef;
      font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding-top:36px;
    }

    .container-panel {
      position: relative;
      z-index: 2;
    }

    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
      border: 1px solid rgba(0,208,122,0.06);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      border-radius: 12px;
      padding: 1.25rem;
    }

    .title {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      color: var(--accent);
      letter-spacing: 1px;
    }

    .muted { color: var(--muted); }

    .hidden { display:none !important; }

    .pw-input {
      background: transparent;
      border: 1px dashed rgba(0,208,122,0.12);
      color: #c9ffee;
      outline: none;
      box-shadow: none;
      border-radius: 8px;
    }
    .pw-input::placeholder { color: rgba(201,255,238,0.45); }
    .pw-input:focus {
      border-color: rgba(0,208,122,0.5);
      box-shadow: 0 6px 18px rgba(0,208,122,0.06);
    }

    .download-list a { color: #e6f7ef; text-decoration:none; }
    .download-list a:hover { color: var(--accent); }

    .status-badge {
      font-family: ui-monospace, "Roboto Mono", monospace;
      background: rgba(0,208,122,0.08);
      color: var(--accent);
      border: 1px solid rgba(0,208,122,0.08);
      padding: 6px 10px;
      border-radius: 8px;
    }

    /* matrix falling lines background */
    .matrix {
      pointer-events: none;
      position: fixed;
      inset: 0;
      z-index: 0;
      background-image:
        linear-gradient(transparent 50%, rgba(0,208,122,0.02) 50%),
        linear-gradient(90deg, transparent 50%, rgba(0,208,122,0.02) 50%);
      background-size: 2px 40px, 40px 2px;
      opacity: 0.08;
    }

    /* small responsive tweaks */
    @media (max-width:767px){
      .pw-input { width:100% !important; }
    }
  </style>
</head>
<body>
  <div class="matrix"></div>

  <div class="container container-panel py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10">
        <div class="panel">
          <!-- Header -->
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <div class="title fs-6">/secret/o2024</div>
              <h3 class="fw-bold text-white">🔒 Fail Muat Turun O2024</h3>
              <div class="muted small">Masukkan kata laluan — akses akan diberikan jika betul.</div>
            </div>
            <div class="text-end">
              <div class="status-badge" id="status-badge">Status: Locked</div>
            </div>
          </div>

          <!-- Password Section -->
          <div id="password-section">
            <div class="mb-3">
              <label for="password-input" class="form-label muted">Kata Laluan</label>
              <input id="password-input" class="form-control pw-input" type="password" placeholder="Taip kata laluan " autocomplete="off" />
            </div>

            <div class="d-flex gap-2 align-items-center">
              <button id="submit-btn" class="btn btn-success">Masuk</button>
              <button id="clear-btn" class="btn btn-outline-secondary">Kosong</button>
              <div class="ms-auto text-end">
                <div class="muted small">Percubaan salah: <span id="attempts-left">—</span></div>
                <div id="lock-info" class="muted small"></div>
              </div>
            </div>

            <div class="mt-3">
              <div id="error-msg" class="text-danger fw-semibold"></div>
              <div id="info-msg" class="text-success fw-semibold"></div>
            </div>
          </div>

          <!-- Download Section (hidden until auth) -->
          <div id="download-section" class="hidden mt-4">
            <h5 class="fw-bold text-white">📂 Muat Turun Fail O2024</h5>
            <p class="muted">Klik untuk muat turun terus dari sini. Fail disimpan dalam folder <code>/o2024</code>.</p>

            <div class="list-group download-list shadow-sm">
              <a class="list-group-item list-group-item-action bg-transparent border-0 text-start" href="o2024/configuration.xml" download>
                <i class="bi bi-file-earmark-code-fill text-warning me-2"></i> configuration.xml
              </a>
              <a class="list-group-item list-group-item-action bg-transparent border-0 text-start" href="o2024/activation-code-run-in-powershell.txt" download>
                <i class="bi bi-terminal-fill text-info me-2"></i> activation-code-run-in-powershell.txt
              </a>
              <a class="list-group-item list-group-item-action bg-transparent border-0 text-start" href="o2024/run-configuration-using-this-code-first.txt" download>
                <i class="bi bi-file-earmark-text-fill text-success me-2"></i> run-configuration-using-this-code-first.txt
              </a>
              <a class="list-group-item list-group-item-action bg-transparent border-0 text-start" href="o2024/setup.exe" download>
                <i class="bi bi-box-seam-fill text-danger me-2"></i> setup.exe
              </a>
            </div>

            <div class="mt-4 d-flex gap-2">
              <button class="btn btn-outline-danger" id="logout-btn">Log Keluar</button>
              <button class="btn btn-outline-secondary" id="lock-now-btn">Lock Now</button>
            </div>

            <div class="mt-3 muted small">Nota: Laman ini tidak diindeks (noindex) dan tidak dihubungkan dengan mainpage.</div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Compact MD5 implementation (public-domain style) -->
  <script>
  /* md5 implementation (compact) */
  function md5cycle(x, k) {
    var a = x[0], b = x[1], c = x[2], d = x[3];
    function ff(a,b,c,d,x,s,ac){ a = add32(a, add32(add32((b & c) | (~b & d), x), ac)); return add32((a<<s)|(a>>> (32-s)), b); }
    function gg(a,b,c,d,x,s,ac){ a = add32(a, add32(add32((b & d) | (c & ~d), x), ac)); return add32((a<<s)|(a>>> (32-s)), b); }
    function hh(a,b,c,d,x,s,ac){ a = add32(a, add32(add32(b ^ c ^ d, x), ac)); return add32((a<<s)|(a>>> (32-s)), b); }
    function ii(a,b,c,d,x,s,ac){ a = add32(a, add32(add32(c ^ (b | ~d), x), ac)); return add32((a<<s)|(a>>> (32-s)), b); }
    a = ff(a,b,c,d,k[0],7,-680876936); d = ff(d,a,b,c,k[1],12,-389564586); c = ff(c,d,a,b,k[2],17,606105819); b = ff(b,c,d,a,k[3],22,-1044525330);
    a = ff(a,b,c,d,k[4],7,-176418897); d = ff(d,a,b,c,k[5],12,1200080426); c = ff(c,d,a,b,k[6],17,-1473231341); b = ff(b,c,d,a,k[7],22,-45705983);
    a = ff(a,b,c,d,k[8],7,1770035416); d = ff(d,a,b,c,k[9],12,-1958414417); c = ff(c,d,a,b,k[10],17,-42063); b = ff(b,c,d,a,k[11],22,-1990404162);
    a = ff(a,b,c,d,k[12],7,1804603682); d = ff(d,a,b,c,k[13],12,-40341101); c = ff(c,d,a,b,k[14],17,-1502002290); b = ff(b,c,d,a,k[15],22,1236535329);

    a = gg(a,b,c,d,k[1],5,-165796510); d = gg(d,a,b,c,k[6],9,-1069501632); c = gg(c,d,a,b,k[11],14,643717713); b = gg(b,c,d,a,k[0],20,-373897302);
    a = gg(a,b,c,d,k[5],5,-701558691); d = gg(d,a,b,c,k[10],9,38016083); c = gg(c,d,a,b,k[15],14,-660478335); b = gg(b,c,d,a,k[4],20,-405537848);
    a = gg(a,b,c,d,k[9],5,568446438); d = gg(d,a,b,c,k[14],9,-1019803690); c = gg(c,d,a,b,k[3],14,-187363961); b = gg(b,c,d,a,k[8],20,1163531501);
    a = gg(a,b,c,d,k[13],5,-1444681467); d = gg(d,a,b,c,k[2],9,-51403784); c = gg(c,d,a,b,k[7],14,1735328473); b = gg(b,c,d,a,k[12],20,-1926607734);

    a = hh(a,b,c,d,k[5],4,-378558); d = hh(d,a,b,c,k[8],11,-2022574463); c = hh(c,d,a,b,k[11],16,1839030562); b = hh(b,c,d,a,k[14],23,-35309556);
    a = hh(a,b,c,d,k[1],4,-1530992060); d = hh(d,a,b,c,k[4],11,1272893353); c = hh(c,d,a,b,k[7],16,-155497632); b = hh(b,c,d,a,k[10],23,-1094730640);
    a = hh(a,b,c,d,k[13],4,681279174); d = hh(d,a,b,c,k[0],11,-358537222); c = hh(c,d,a,b,k[3],16,-722521979); b = hh(b,c,d,a,k[6],23,76029189);
    a = hh(a,b,c,d,k[9],4,-640364487); d = hh(d,a,b,c,k[12],11,-421815835); c = hh(c,d,a,b,k[15],16,530742520); b = hh(b,c,d,a,k[2],23,-995338651);

    a = ii(a,b,c,d,k[0],6,-198630844); d = ii(d,a,b,c,k[7],10,1126891415); c = ii(c,d,a,b,k[14],15,-1416354905); b = ii(b,c,d,a,k[5],21,-57434055);
    a = ii(a,b,c,d,k[12],6,1700485571); d = ii(d,a,b,c,k[3],10,-1894986606); c = ii(c,d,a,b,k[10],15,-1051523); b = ii(b,c,d,a,k[1],21,-2054922799);
    a = ii(a,b,c,d,k[8],6,1873313359); d = ii(d,a,b,c,k[15],10,-30611744); c = ii(c,d,a,b,k[6],15,-1560198380); b = ii(b,c,d,a,k[13],21,1309151649);
    a = ii(a,b,c,d,k[4],6,-145523070); d = ii(d,a,b,c,k[11],10,-1120210379); c = ii(c,d,a,b,k[2],15,718787259); b = ii(b,c,d,a,k[9],21,-343485551);

    x[0] = add32(a, x[0]); x[1] = add32(b, x[1]); x[2] = add32(c, x[2]); x[3] = add32(d, x[3]);
  }
  function md51(s) {
    var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i;
    for (i=64; i<=s.length; i+=64) md5cycle(state, md5blk(s.substring(i-64, i)));
    s = s.substring(i-64);
    var tail = new Array(16).fill(0);
    for (i=0;i<s.length;i++) tail[i>>2] |= s.charCodeAt(i) << ((i%4) << 3);
    tail[i>>2] |= 0x80 << ((i%4) << 3);
    if (i > 55) { md5cycle(state, tail); tail = new Array(16).fill(0); }
    tail[14] = n*8; md5cycle(state, tail); return state;
  }
  function md5blk(s) {
    var md5blks = [], i;
    for (i=0;i<64;i+=4) md5blks[i>>2] = s.charCodeAt(i) + (s.charCodeAt(i+1)<<8) + (s.charCodeAt(i+2)<<16) + (s.charCodeAt(i+3)<<24);
    return md5blks;
  }
  var hex_chr = '0123456789abcdef'.split('');
  function rhex(n){ var s=''; for(var j=0;j<4;j++) s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F]; return s; }
  function md5(s){ return md51(s).map(rhex).join(''); }
  function add32(a,b){ return (a + b) & 0xFFFFFFFF; }
  </script>

  <script>
    // ---------- CONFIG ----------
    // MD5 hash 
    const CORRECT_MD5 = "71675337ca0d558c15f36c1c3d85e31d";

    const MAX_ATTEMPTS = 3;               // allowed attempts before lock
    const LOCK_BASE_MINUTES = 1;          // initial lock duration (minutes)
    const LOCK_MAX_MINUTES = 60 * 24;     // cap lock duration (max 1 day)
    const STORAGE_KEY = "o2024_protect_v1";

    // UI refs
    const input = document.getElementById("password-input");
    const submitBtn = document.getElementById("submit-btn");
    const clearBtn = document.getElementById("clear-btn");
    const errorMsg = document.getElementById("error-msg");
    const infoMsg = document.getElementById("info-msg");
    const attemptsLeftEl = document.getElementById("attempts-left");
    const lockInfoEl = document.getElementById("lock-info");
    const statusBadge = document.getElementById("status-badge");
    const passwordSection = document.getElementById("password-section");
    const downloadSection = document.getElementById("download-section");
    const logoutBtn = document.getElementById("logout-btn");
    const lockNowBtn = document.getElementById("lock-now-btn");

    // state helpers
    function nowMillis(){ return Date.now(); }
    function formatTime(ms){ return new Date(ms).toLocaleString(); }

    function loadState(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : { attempts:0, lockedUntil:0, totalLocks:0 };
      } catch(e) {
        return { attempts:0, lockedUntil:0, totalLocks:0 };
      }
    }
    function saveState(s){ localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }
    function calculateLockMinutes(totalLocks){
      // totalLocks starts at 1 for first lock; exponential backoff
      const minutes = Math.min(LOCK_BASE_MINUTES * Math.pow(2, Math.max(0, totalLocks-1)), LOCK_MAX_MINUTES);
      return Math.max(LOCK_BASE_MINUTES, Math.round(minutes));
    }

    // beep function for wrong password
    function beep(freq=620, duration=140, type='sine'){
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = type;
        o.frequency.value = freq;
        o.connect(g);
        g.connect(ctx.destination);
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.12, ctx.currentTime + 0.01);
        o.start();
        setTimeout(()=> {
          g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.04);
          setTimeout(()=> { o.stop(); ctx.close(); }, 60);
        }, duration);
      } catch(e){ /* no audio available */ }
    }

    // initialize state
    let state = loadState();

    function updateUI(){
      const locked = state.lockedUntil && state.lockedUntil > nowMillis();
      const authed = sessionStorage.getItem("o2024_auth") === "true";

      statusBadge.textContent = locked ? "Status: Locked" : (authed ? "Status: Unlocked" : "Status: Locked");
      attemptsLeftEl.textContent = Math.max(0, MAX_ATTEMPTS - (state.attempts || 0));
      if(locked){
        const minsLeft = Math.ceil((state.lockedUntil - nowMillis()) / 60000);
        lockInfoEl.textContent = "Boleh cuba semula pada: " + formatTime(state.lockedUntil) + " (" + minsLeft + " minit lagi)";
        input.disabled = true;
        submitBtn.disabled = true;
      } else {
        lockInfoEl.textContent = "";
        input.disabled = !!authed ? true : false; // if authed, hide input anyway
        submitBtn.disabled = !!authed ? true : false;
      }

      if(authed){
        passwordSection.classList.add("hidden");
        downloadSection.classList.remove("hidden");
        statusBadge.textContent = "Status: Unlocked";
      } else {
        passwordSection.classList.remove("hidden");
        downloadSection.classList.add("hidden");
      }
    }

    // attempt lock action
    function lockForAttempts(){
      state.totalLocks = (state.totalLocks || 0) + 1;
      const minutes = calculateLockMinutes(state.totalLocks);
      state.lockedUntil = nowMillis() + minutes * 60 * 1000;
      state.attempts = 0; // reset attempts after lock
      saveState(state);
      errorMsg.textContent = "🔒 Telah dikunci selama " + minutes + " minit. Boleh cuba semula pada: " + formatTime(state.lockedUntil);
      infoMsg.textContent = "";
      updateUI();
    }

    function checkPassword(){
      errorMsg.textContent = ""; infoMsg.textContent = "";
      // if locked, block
      if(state.lockedUntil && state.lockedUntil > nowMillis()){
        errorMsg.textContent = "🔒 Masih dikunci. Cuba semula pada: " + formatTime(state.lockedUntil);
        updateUI();
        return;
      }

      const val = (input.value || "").trim();
      if(!val){
        errorMsg.textContent = "Sila masukkan kata laluan.";
        return;
      }

      // compare MD5
      const inputHash = md5(val);
      if(inputHash === CORRECT_MD5){
        sessionStorage.setItem("o2024_auth","true");
        state.attempts = 0;
        state.lockedUntil = 0;
        saveState(state);
        infoMsg.textContent = "✅ Akses dibenarkan. Anda boleh muat turun sekarang.";
        errorMsg.textContent = "";
        updateUI();
      } else {
        // wrong
        state.attempts = (state.attempts || 0) + 1;
        saveState(state);
        const remaining = Math.max(0, MAX_ATTEMPTS - state.attempts);
        // beep
        beep(560, 160);
        if(state.attempts >= MAX_ATTEMPTS){
          lockForAttempts();
        } else {
          errorMsg.textContent = "❌ Kata laluan salah. Percubaan tinggal: " + remaining;
        }
        updateUI();
      }
    }

    // Enter key to submit
    input.addEventListener("keydown", function(e){
      if(e.key === "Enter"){
        e.preventDefault();
        submitBtn.click();
      }
    });

    submitBtn.addEventListener("click", checkPassword);

    clearBtn.addEventListener("click", ()=>{
      input.value = "";
      errorMsg.textContent = "";
      infoMsg.textContent = "";
      input.focus();
    });

    logoutBtn.addEventListener("click", ()=>{
      sessionStorage.removeItem("o2024_auth");
      infoMsg.textContent = "Anda telah logout.";
      // after logout re-enable input
      updateUI();
    });

    lockNowBtn.addEventListener("click", ()=>{
      state.totalLocks = (state.totalLocks || 0) + 1;
      const minutes = calculateLockMinutes(state.totalLocks);
      state.lockedUntil = nowMillis() + minutes*60*1000;
      state.attempts = 0;
      saveState(state);
      errorMsg.textContent = "🔒 Dikunci secara manual selama " + minutes + " minit.";
      sessionStorage.removeItem("o2024_auth");
      updateUI();
    });

    // poll to update UI and unlock when time passed
    setInterval(()=> {
      if(state.lockedUntil && state.lockedUntil <= nowMillis()){
        state.lockedUntil = 0;
        state.attempts = 0;
        saveState(state);
      }
      updateUI();
    }, 1000);

    // on load: show download if already authed in session
    window.addEventListener("load", ()=>{
      if(sessionStorage.getItem("o2024_auth") === "true"){
        infoMsg.textContent = "Sesi sudah dibuka.";
      }
      updateUI();
    });

    // optional: small safety - clear session on close (not strictly needed)
    // window.addEventListener("beforeunload", ()=>{ /* keep session */ });

    // Debug (disabled in console by default)
    // console.log("CORRECT_MD5", CORRECT_MD5);
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
